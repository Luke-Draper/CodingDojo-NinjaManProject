<html>
	<head>
		<title>Ninja-Man</title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
				line-height: 0;
			}
			.tile {
				height: 40px;
				width: 40px;
				display: inline-block;
			}
			.wall {
				background-color: blue;
			}
			.sushi {
				background-color: black;
				background-image: url("img/sushi.png");
				background-size: contain;
			}
			.blank {
				background-color: black;
			}
			#ninja-man {
				background-color: black;
				background-image: url("img/ninja.gif");
				background-size: contain;
				position: absolute;
				top: 40px;
				left: 40px;
			}
		</style>
	</head>
	<body>
		<div id="world"></div>
		<div id="ninja-man" class="tile"></div>
		<script type="text/javascript">
			
			var worldArray = [
				[1,1,1,1,1,1,1,1,1],
				[1,0,2,2,2,2,2,2,1],
				[1,2,1,2,1,2,1,2,1],
				[1,2,2,2,2,2,2,2,1],
				[1,2,1,2,1,2,1,2,1],
				[1,2,2,2,2,2,2,2,1],
				[1,2,1,2,1,2,1,2,1],
				[1,2,2,2,2,2,2,2,1],
				[1,1,1,1,1,1,1,1,1],
			];
			var worldDict = {
				0: 'blank',
				1: 'wall',
				2: 'sushi'
			}

			function drawWorld() {
				var worldContent = "";
				for (var row=0; row<worldArray.length; row++) {
					worldContent += "<div class='row'>";
					for (var col=0; col<worldArray[row].length; col++) {
						worldContent += ("<div class='tile " + worldDict[worldArray[row][col]] + "'></div>");
					}
					worldContent += "</div>";
				}
				document.getElementById('world').innerHTML = worldContent;
			}

			var ninjaMan = {
				x: 1,
				y: 1,
				score: 0
			}
			const GRID_SIZE = 40;

			function updateNinjaMan() {
				document.getElementById("ninja-man").style.left = ninjaMan.x * GRID_SIZE + "px";
				document.getElementById("ninja-man").style.top = ninjaMan.y * GRID_SIZE + "px";
			}
			
			function moveNinjaMan(xMove,yMove) {
				if (worldDict[worldArray[ninjaMan.y + yMove][ninjaMan.x + xMove]] == 'blank') {
					ninjaMan.x += xMove;
					ninjaMan.y += yMove;
					updateNinjaMan();
				} else if (worldDict[worldArray[ninjaMan.y + yMove][ninjaMan.x + xMove]] == 'sushi') {
					worldArray[ninjaMan.y + yMove][ninjaMan.x + xMove] = 0;
					drawWorld();
					ninjaMan.x += xMove;
					ninjaMan.y += yMove;
					ninjaMan.score++;
					updateNinjaMan();
					console.log(ninjaMan.score);
				}
			}

			document.onkeydown = function(e){
				if(e.keyCode == 37) { // LEFT
					moveNinjaMan(-1,0);
				}
				else if (e.keyCode == 39) { // RIGHT
					moveNinjaMan(1,0);
				}
				else if (e.keyCode == 38) { // UP
					moveNinjaMan(0,-1);
				}
				else if (e.keyCode == 40) { // DOWN
					moveNinjaMan(0,1);
				}
			}
			drawWorld();
		</script>
	</body>
</html>